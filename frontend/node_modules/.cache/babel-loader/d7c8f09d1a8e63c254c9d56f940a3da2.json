{"ast":null,"code":"import { csrfFetch } from './csrf';\nconst SET_USER = 'session/setUser';\nconst REMOVE_USER = 'session/removeUser'; // ===========================================================================\n// SET USER\n// ===========================================================================\n\nconst setUser = user => {\n  return {\n    type: SET_USER,\n    payload: user\n  };\n}; // ===========================================================================\n// ASSOCIATIONS\n// ===========================================================================\n\n\nconst removeUser = () => {\n  return {\n    type: REMOVE_USER\n  };\n};\n\nconst initialState = {\n  user: null\n};\n\nconst sessionReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let newState;\n\n  switch (action.type) {\n    case SET_USER:\n      newState = Object.assign({}, state);\n      newState.user = action.payload;\n      return newState;\n\n    case REMOVE_USER:\n      newState = Object.assign({}, state);\n      newState.user = null;\n      return newState;\n\n    default:\n      return state;\n  }\n}; // ===========================================================================\n// RESTORE USER\n// ===========================================================================\n\n\nexport const restoreUser = () => async dispatch => {\n  const response = await csrfFetch('/api/session');\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n}; // ===========================================================================\n// LOGIN\n// ===========================================================================\n\nexport const login = user => async dispatch => {\n  const {\n    credential,\n    password\n  } = user;\n  const response = await csrfFetch('/api/session', {\n    method: 'POST',\n    body: JSON.stringify({\n      credential,\n      password\n    })\n  });\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n}; // ===========================================================================\n// SIGNUP\n// ===========================================================================\n\nexport const signup = user => async dispatch => {\n  const {\n    username,\n    email,\n    password\n  } = user;\n  const response = await csrfFetch(\"/api/users\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      username,\n      email,\n      password\n    })\n  });\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n}; // ===========================================================================\n// LOGOUT\n// ===========================================================================\n\nexport const logout = () => async dispatch => {\n  const response = await csrfFetch('/api/session', {\n    method: 'DELETE'\n  });\n  dispatch(removeUser());\n  return response;\n};\nexport default sessionReducer;","map":{"version":3,"sources":["/Users/jamestuttle/aa/Module-5-Resources/authenticate-me/frontend/src/store/session.js"],"names":["csrfFetch","SET_USER","REMOVE_USER","setUser","user","type","payload","removeUser","initialState","sessionReducer","state","action","newState","Object","assign","restoreUser","dispatch","response","data","json","login","credential","password","method","body","JSON","stringify","signup","username","email","logout"],"mappings":"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","sourcesContent":["import { csrfFetch } from './csrf';\n\nconst SET_USER = 'session/setUser';\nconst REMOVE_USER = 'session/removeUser';\n\n// ===========================================================================\n// SET USER\n// ===========================================================================\nconst setUser = (user) => {\n  return {\n    type: SET_USER,\n    payload: user,\n  };\n};\n\n// ===========================================================================\n// ASSOCIATIONS\n// ===========================================================================\nconst removeUser = () => {\n  return {\n    type: REMOVE_USER,\n  };\n};\n\n\n\nconst initialState = { user: null };\n\nconst sessionReducer = (state = initialState, action) => {\n  let newState;\n  switch (action.type) {\n    case SET_USER:\n      newState = Object.assign({}, state);\n      newState.user = action.payload;\n      return newState;\n    case REMOVE_USER:\n      newState = Object.assign({}, state);\n      newState.user = null;\n      return newState;\n    default:\n      return state;\n  }\n};\n\n// ===========================================================================\n// RESTORE USER\n// ===========================================================================\nexport const restoreUser = () => async dispatch => {\n  const response = await csrfFetch('/api/session');\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n};\n\n\n// ===========================================================================\n// LOGIN\n// ===========================================================================\nexport const login = (user) => async (dispatch) => {\n  const { credential, password } = user;\n  const response = await csrfFetch('/api/session', {\n    method: 'POST',\n    body: JSON.stringify({\n      credential,\n      password,\n    }),\n  });\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n};\n\n\n// ===========================================================================\n// SIGNUP\n// ===========================================================================\nexport const signup = (user) => async (dispatch) => {\n  const { username, email, password } = user;\n  const response = await csrfFetch(\"/api/users\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      username,\n      email,\n      password,\n    }),\n  });\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n};\n\n// ===========================================================================\n// LOGOUT\n// ===========================================================================\nexport const logout = () => async (dispatch) => {\n  const response = await csrfFetch('/api/session', {\n    method: 'DELETE',\n  });\n  dispatch(removeUser());\n  return response;\n};\n\n\n\n\n\nexport default sessionReducer;"]},"metadata":{},"sourceType":"module"}